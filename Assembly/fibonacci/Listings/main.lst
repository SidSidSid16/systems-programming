


ARM Macro Assembler    Page 1 


    1 00000000         ; new fibonacci code with fewer move instr.
    2 00000000                 AREA             storage,DATA
    3 00000000         array
    4 00000000 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00            SPACE            4*20        ; Declares a 20-wor
                                                            d storage area
    5 00000050         array_end
    6 00000050         
    7 00000050                 AREA             mainarea,CODE
    8 00000000                 EXPORT           asm_main
    9 00000000         asm_main
   10 00000000         ; Your code goes here
   11 00000000 480A            LDR              r0, =array
   12 00000002 490B            LDR              r1, =array_end
   13 00000004 F04F 0201       MOV              r2, #1
   14 00000008 F04F 0301       MOV              r3, #1
   15 0000000C F000 F800       BL               fibonacci
   16 00000010         fibonacci
   17 00000010 F841 2B04       STR              r2, [r1], #4
   18 00000014 4288            CMP              r0, r1
   19 00000016 BF28 4770       BXHS             lr
   20 0000001A         
   21 0000001A F841 3B04       STR              r3, [r1], #4
   22 0000001E 4288            CMP              r0, r1
   23 00000020 BF28 4770       BXHS             lr
   24 00000024         
   25 00000024 441A            ADD              r2, r2, r3
   26 00000026 4413            ADD              r3, r3, r2
   27 00000028         
   28 00000028 E7F2            B                fibonacci   ; branch back to th
                                                            e start of the loop
                                                            
   29 0000002A         end_fibonacci
   30 0000002A         



ARM Macro Assembler    Page 2 


   31 0000002A E7FE            B                .           ; Loop forever
   32 0000002C         
   33 0000002C                 ALIGN
   34 0000002C                 END
              00000000 
              00000000 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp.sp --depen
d=.\objects\main.d -o.\objects\main.o -I.\RTE\_STM32F407_Flash -IC:\KEIL_V5\ARM
\PACK\ARM\CMSIS\5.8.0\CMSIS\Core\Include -IC:\KEIL_V5\ARM\PACK\Keil\STM32F4xx_D
FP\2.15.0\Drivers\CMSIS\Device\ST\STM32F4xx\Include --predefine="__UVISION_VERS
ION SETA 535" --predefine="_RTE_ SETA 1" --predefine="STM32F407xx SETA 1" --pre
define="_RTE_ SETA 1" --list=.\listings\main.lst asm\main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

array 00000000

Symbol: array
   Definitions
      At line 3 in file asm\main.s
   Uses
      At line 11 in file asm\main.s
Comment: array used once
array_end 00000050

Symbol: array_end
   Definitions
      At line 5 in file asm\main.s
   Uses
      At line 12 in file asm\main.s
Comment: array_end used once
storage 00000000

Symbol: storage
   Definitions
      At line 2 in file asm\main.s
   Uses
      None
Comment: storage unused
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

asm_main 00000000

Symbol: asm_main
   Definitions
      At line 9 in file asm\main.s
   Uses
      At line 8 in file asm\main.s
Comment: asm_main used once
end_fibonacci 0000002A

Symbol: end_fibonacci
   Definitions
      At line 29 in file asm\main.s
   Uses
      None
Comment: end_fibonacci unused
fibonacci 00000010

Symbol: fibonacci
   Definitions
      At line 16 in file asm\main.s
   Uses
      At line 15 in file asm\main.s
      At line 28 in file asm\main.s

mainarea 00000000

Symbol: mainarea
   Definitions
      At line 7 in file asm\main.s
   Uses
      None
Comment: mainarea unused
4 symbols
343 symbols in table
